# üß† 10 –ü–†–û–ì–†–ê–ú–ò–°–¢–ö–ò –ó–ê–î–ê–ß–ò –° –ò–°–¢–û–†–ò–Ø, –†–ï–ß–ù–ò–¶–ò, –ö–õ–ê–°–û–í–ï –ò –¢–ï–°–¢–û–í–ï

# ---------------------------------------------------------------
## üè™ –ó–ê–î–ê–ß–ê 1: –û–Ω–ª–∞–π–Ω –º–∞–≥–∞–∑–∏–Ω –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –ø–æ—Ä—ä—á–∫–∏
# ---------------------------------------------------------------
# –ò—Å—Ç–æ—Ä–∏—è:
# –°–æ–±—Å—Ç–≤–µ–Ω–∏–∫ —Å–∏ –Ω–∞ –æ–Ω–ª–∞–π–Ω –º–∞–≥–∞–∑–∏–Ω. –í—Å–µ–∫–∏ –ø—Ä–æ–¥—É–∫—Ç –∏–º–∞ —Ü–µ–Ω–∞ –∏ –Ω–∞–ª–∏—á–Ω–æ—Å—Ç.
# –¢—Ä—è–±–≤–∞ –¥–∞ –ø—Ä–∏–µ–º–∞—à –ø–æ—Ä—ä—á–∫–∏ –∏ –¥–∞ –∏–∑—á–∏—Å–ª—è–≤–∞—à –∫—Ä–∞–π–Ω–∞—Ç–∞ —Å—É–º–∞, 
# –∫–∞—Ç–æ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞—à –Ω–∞–ª–∏—á–Ω–æ—Å—Ç–∏—Ç–µ –≤ —Å–∫–ª–∞–¥–∞.
# 
# –£—Å–ª–æ–≤–∏–µ:
# –°—ä–∑–¥–∞–π –∫–ª–∞—Å `Store`, –∫–æ–π—Ç–æ –∏–º–∞ –º–µ—Ç–æ–¥–∏:
# - add_product(name, price, stock)
# - process_order(order_dict) ‚Üí –≤—Ä—ä—â–∞ –æ–±—â–∞ —Å—É–º–∞ –∏ –æ–±–Ω–æ–≤–µ–Ω —Å–∫–ª–∞–¥
# –ê–∫–æ –Ω—è–∫–æ–π –ø—Ä–æ–¥—É–∫—Ç –Ω–µ –µ –Ω–∞–ª–∏—á–µ–Ω ‚Äì –ø—Ä–æ–ø—É—Å–Ω–∏ –≥–æ.
# 
# –¢–µ—Å—Ç:
class Store:
    def __init__(self):
        self.products = {}

    def add_product(self, name, price, stock):
        self.products[name] = {"price": price, "stock": stock}

    def process_order(self, order):
        total = 0
        for item, qty in order.items():
            if item in self.products and self.products[item]["stock"] >= qty:
                total += self.products[item]["price"] * qty
                self.products[item]["stock"] -= qty
        return total, self.products

store = Store()
store.add_product("–ª–∞–ø—Ç–æ–ø", 1200, 5)
store.add_product("–º–∏—à–∫–∞", 25, 10)
store.add_product("–º–æ–Ω–∏—Ç–æ—Ä", 300, 2)
print(store.process_order({"–ª–∞–ø—Ç–æ–ø":2,"–º–æ–Ω–∏—Ç–æ—Ä":3,"–º–∏—à–∫–∞":5}))
# –û—á–∞–∫–≤–∞–Ω –∏–∑—Ö–æ–¥: (2625, {'–ª–∞–ø—Ç–æ–ø': {'price': 1200, 'stock': 3}, '–º–∏—à–∫–∞': {'price': 25, 'stock': 5}, '–º–æ–Ω–∏—Ç–æ—Ä': {'price': 300, 'stock': 2}})


# ---------------------------------------------------------------
## üéì –ó–ê–î–ê–ß–ê 2: –ê–∫–∞–¥–µ–º–∏—á–µ–Ω —Ä–µ–≥–∏—Å—Ç—ä—Ä
# ---------------------------------------------------------------
# –ò—Å—Ç–æ—Ä–∏—è:
# –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç —Å—ä—Ö—Ä–∞–Ω—è–≤–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ —Å—Ç—É–¥–µ–Ω—Ç–∏ –∏ –æ—Ü–µ–Ω–∫–∏.
# –¢—Ä—è–±–≤–∞ –¥–∞ —Å–µ –æ–ø—Ä–µ–¥–µ–ª–∏ –Ω–∞–π-–¥–æ–±—Ä–∏—è—Ç —Å—Ç—É–¥–µ–Ω—Ç –ø–æ —Å—Ä–µ–¥–µ–Ω —É—Å–ø–µ—Ö.
#
# –£—Å–ª–æ–≤–∏–µ:
# –°—ä–∑–¥–∞–π —Ñ—É–Ω–∫—Ü–∏—è best_student(students), –∫–æ—è—Ç–æ –≤—Ä—ä—â–∞ –∏–º–µ—Ç–æ –∏ —Å—Ä–µ–¥–Ω–∏—è —É—Å–ø–µ—Ö.
def best_student(students):
    averages = {}
    for name, subjects in students.items():
        all_grades = [g for s in subjects.values() for g in s]
        averages[name] = round(sum(all_grades)/len(all_grades), 2)
    best = max(averages, key=averages.get)
    return best, averages[best]

data = {
    "–ò–≤–∞–Ω": {"math":[5,6,6],"it":[6,5]},
    "–ú–∞—Ä–∏—è": {"math":[6,6,6],"it":[5,6]},
    "–ü–µ—Ç—ä—Ä": {"math":[4,4],"it":[5,4]}
}
print(best_student(data))
# –û—á–∞–∫–≤–∞–Ω –∏–∑—Ö–æ–¥: ('–ú–∞—Ä–∏—è', 5.83)


# ---------------------------------------------------------------
## üçî –ó–ê–î–ê–ß–ê 3: –†–µ—Å—Ç–æ—Ä–∞–Ω—Ç –∏ –ø–æ—Ä—ä—á–∫–∏
# ---------------------------------------------------------------
# –ò—Å—Ç–æ—Ä–∏—è:
# –†–µ—Å—Ç–æ—Ä–∞–Ω—Ç—ä—Ç –ø–æ–ª—É—á–∞–≤–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–æ—Ä—ä—á–∫–∏, –∞ —Ç–∏ —Ç—Ä—è–±–≤–∞ –¥–∞ –∏–∑—á–∏—Å–ª–∏—à —Å–º–µ—Ç–∫–∏—Ç–µ.
# 
# –£—Å–ª–æ–≤–∏–µ:
# –ù–∞–ø–∏—à–∏ —Ñ—É–Ω–∫—Ü–∏—è calculate_order(menu, orders),
# –∫–æ—è—Ç–æ –≤—Ä—ä—â–∞ —Ä–µ—á–Ω–∏–∫ {–º–∞—Å–∞: –æ–±—â–∞_—Å—É–º–∞} –∏ –æ–±—â–∞—Ç–∞ —Å—É–º–∞.
def calculate_order(menu, orders):
    results = {}
    total = 0
    for table, order in orders.items():
        cost = sum(menu[i]*q for i,q in order.items() if i in menu)
        results[table] = cost
        total += cost
    return results, total

menu = {"–ø–∞—Å—Ç–∞":10,"–ø–∏—Ü–∞":12,"—Å–∞–ª–∞—Ç–∞":6}
orders = {"–ú–∞—Å–∞1":{"–ø–∏—Ü–∞":2,"—Å–∞–ª–∞—Ç–∞":1},"–ú–∞—Å–∞2":{"–ø–∞—Å—Ç–∞":3}}
print(calculate_order(menu, orders))
# –û—á–∞–∫–≤–∞–Ω –∏–∑—Ö–æ–¥: ({'–ú–∞—Å–∞1':30, '–ú–∞—Å–∞2':30}, 60)


# ---------------------------------------------------------------
## üíº –ó–ê–î–ê–ß–ê 4: –§–∏–Ω–∞–Ω—Å–æ–≤ –æ—Ç—á–µ—Ç
# ---------------------------------------------------------------
# –ò—Å—Ç–æ—Ä–∏—è:
# –§–∏—Ä–º–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä–∞ –º–µ—Å–µ—á–Ω–∏—Ç–µ —Å–∏ –ø—Ä–∏—Ö–æ–¥–∏ –∏ —Ä–∞–∑—Ö–æ–¥–∏.
# 
# –£—Å–ª–æ–≤–∏–µ:
# –ù–∞–ø–∏—à–∏ —Ñ—É–Ω–∫—Ü–∏—è profit_report(finances), –∫–æ—è—Ç–æ –≤—Ä—ä—â–∞
# {–º–µ—Å–µ—Ü: –ø–µ—á–∞–ª–±–∞} –∏ –Ω–∞–π-–ø–µ—á–µ–ª–∏–≤—à–∏—è –º–µ—Å–µ—Ü.
def profit_report(finances):
    profit = {m: v["–ø—Ä–∏—Ö–æ–¥–∏"]-v["—Ä–∞–∑—Ö–æ–¥–∏"] for m,v in finances.items()}
    best = max(profit, key=profit.get)
    return profit, best

data = {"–Ø–Ω—É–∞—Ä–∏":{"–ø—Ä–∏—Ö–æ–¥–∏":2000,"—Ä–∞–∑—Ö–æ–¥–∏":1500},
        "–§–µ–≤—Ä—É–∞—Ä–∏":{"–ø—Ä–∏—Ö–æ–¥–∏":2500,"—Ä–∞–∑—Ö–æ–¥–∏":2600},
        "–ú–∞—Ä—Ç":{"–ø—Ä–∏—Ö–æ–¥–∏":3000,"—Ä–∞–∑—Ö–æ–¥–∏":2000}}
print(profit_report(data))
# –û—á–∞–∫–≤–∞–Ω –∏–∑—Ö–æ–¥: ({'–Ø–Ω—É–∞—Ä–∏':500,'–§–µ–≤—Ä—É–∞—Ä–∏':-100,'–ú–∞—Ä—Ç':1000}, '–ú–∞—Ä—Ç')


# ---------------------------------------------------------------
## üïπÔ∏è –ó–ê–î–ê–ß–ê 5: –ò–≥—Ä–∞ –∏ —Ç–æ–ø –∏–≥—Ä–∞—á–∏
# ---------------------------------------------------------------
# –ò—Å—Ç–æ—Ä–∏—è:
# –ò–≥—Ä–∞—á–∏—Ç–µ —Å—ä–±–∏—Ä–∞—Ç —Ç–æ—á–∫–∏. –¢—Ä—è–±–≤–∞ –¥–∞ –ø–æ–∫–∞–∂–µ—à —Ç–æ–ø 3 –ø–æ –æ–±—â —Ä–µ–∑—É–ª—Ç–∞—Ç.
def top_players(scores):
    totals = {p:sum(s) for p,s in scores.items()}
    return sorted(totals.items(), key=lambda x: x[1], reverse=True)[:3]

data = {"–ò–≤–∞–Ω":[10,20,30],"–ú–∞—Ä–∏—è":[50,40],"–ü–µ—Ç—ä—Ä":[15,10,15],"–ì–æ—à–æ":[60]}
print(top_players(data))
# –û—á–∞–∫–≤–∞–Ω –∏–∑—Ö–æ–¥: [('–ú–∞—Ä–∏—è',90),('–ì–æ—à–æ',60),('–ò–≤–∞–Ω',60)]


# ---------------------------------------------------------------
## üìö –ó–ê–î–ê–ß–ê 6: –ö–∞—Ç–∞–ª–æ–≥ —Å –∫–Ω–∏–≥–∏ –∏ –æ—Ü–µ–Ω–∫–∏
# ---------------------------------------------------------------
# –ò—Å—Ç–æ—Ä–∏—è:
# –û–Ω–ª–∞–π–Ω –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Å—ä–±–∏—Ä–∞ –æ—Ü–µ–Ω–∫–∏ –Ω–∞ –∫–Ω–∏–≥–∏. –¢—Ä—è–±–≤–∞ –¥–∞ —Å–µ –ø–æ–∫–∞–∂–∞—Ç
# —Å–∞–º–æ –Ω–∞–π-–¥–æ–±—Ä–∏—Ç–µ –∫–Ω–∏–≥–∏.
def top_books(ratings, min_votes):
    res = {}
    for title, votes in ratings.items():
        if len(votes) >= min_votes:
            avg = sum(votes)/len(votes)
            if avg >= 4.5:
                res[title] = round(avg,2)
    return res

ratings = {"Dune":[5,5,4,5],"1984":[4,3],"It":[5,5,5,5,5]}
print(top_books(ratings, 3))
# –û—á–∞–∫–≤–∞–Ω –∏–∑—Ö–æ–¥: {'Dune': 4.75, 'It': 5.0}


# ---------------------------------------------------------------
## üß≥ –ó–ê–î–ê–ß–ê 7: –ü—ä—Ç—É–≤–∞—â–∞ –∞–≥–µ–Ω—Ü–∏—è
# ---------------------------------------------------------------
# –ò—Å—Ç–æ—Ä–∏—è:
# –¢—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∞ –∞–≥–µ–Ω—Ü–∏—è –∏–º–∞ –æ—Ñ–µ—Ä—Ç–∏ –∑–∞ —Ä–∞–∑–ª–∏—á–Ω–∏ –¥–µ—Å—Ç–∏–Ω–∞—Ü–∏–∏.
# –¢—Ä—è–±–≤–∞ –¥–∞ –∏–∑—á–∏—Å–ª–∏—à —Å—Ç–æ–π–Ω–æ—Å—Ç—Ç–∞ –Ω–∞ –≤—Å—è–∫–æ –ø—ä—Ç—É–≤–∞–Ω–µ –∏ –Ω–∞–π-—Å–∫—ä–ø–æ—Ç–æ.
def calculate_trips(trips, bookings):
    costs = {name: trips[b["–¥–µ—Å—Ç–∏–Ω–∞—Ü–∏—è"]] * b["—Ö–æ—Ä–∞"] for name, b in bookings.items()}
    max_trip = max(costs, key=costs.get)
    return costs, max_trip

trips = {"–†–∏–º":500,"–ü–∞—Ä–∏–∂":700,"–ê—Ç–∏–Ω–∞":400}
bookings = {"–ò–≤–∞–Ω":{"–¥–µ—Å—Ç–∏–Ω–∞—Ü–∏—è":"–ü–∞—Ä–∏–∂","—Ö–æ—Ä–∞":2},"–ú–∞—Ä–∏—è":{"–¥–µ—Å—Ç–∏–Ω–∞—Ü–∏—è":"–†–∏–º","—Ö–æ—Ä–∞":1}}
print(calculate_trips(trips, bookings))
# –û—á–∞–∫–≤–∞–Ω –∏–∑—Ö–æ–¥: ({'–ò–≤–∞–Ω':1400,'–ú–∞—Ä–∏—è':500}, '–ò–≤–∞–Ω')


# ---------------------------------------------------------------
## üí∞ –ó–ê–î–ê–ß–ê 8: –ö—Ä–∏–ø—Ç–æ–ø–æ—Ä—Ç—Ñ–µ–π–ª
# ---------------------------------------------------------------
# –ò—Å—Ç–æ—Ä–∏—è:
# –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ –∏–º–∞—Ç –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—É—Ç–∏. –¢—Ä—è–±–≤–∞ –¥–∞ –∏–∑—á–∏—Å–ª–∏—à —Å—Ç–æ–π–Ω–æ—Å—Ç—Ç–∞ –Ω–∞ –≤—Å–µ–∫–∏ –ø–æ—Ä—Ç—Ñ–µ–π–ª.
def portfolio_value(users):
    totals = {u: sum(q*p for q,p in vals.values()) for u, vals in users.items()}
    best = max(totals, key=totals.get)
    return totals, best

users = {
  "–ò–≤–∞–Ω": {"BTC":(0.1,60000),"ETH":(2,2000)},
  "–ú–∞—Ä–∏—è": {"BTC":(0.05,60000),"DOGE":(1000,0.08)}
}
print(portfolio_value(users))
# –û—á–∞–∫–≤–∞–Ω –∏–∑—Ö–æ–¥: ({'–ò–≤–∞–Ω':10000,'–ú–∞—Ä–∏—è':7000}, '–ò–≤–∞–Ω')


# ---------------------------------------------------------------
## ‚öôÔ∏è –ó–ê–î–ê–ß–ê 9: –°–µ—Ä–≤–∏–∑ –∑–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏
# ---------------------------------------------------------------
# –ò—Å—Ç–æ—Ä–∏—è:
# –°–µ—Ä–≤–∏–∑ –ø–∞–∑–∏ –¥–∞–Ω–Ω–∏ –∑–∞ —Ä–µ–º–æ–Ω—Ç–∏—Ä–∞–Ω–∏ –∫–æ–ª–∏. 
# –î–∞ —Å–µ –≤—ä—Ä–Ω–µ –±—Ä–æ–π —Ä–µ–º–æ–Ω—Ç–∏ –∏ –∫–æ–∏ —Å–∞ –ø–æ-—Å—Ç–∞—Ä–∏ –æ—Ç 5 –≥–æ–¥–∏–Ω–∏.
from datetime import datetime
def service_report(cars):
    year = datetime.now().year
    repairs = {c["–º–æ–¥–µ–ª"]: len(c["—Ä–µ–º–æ–Ω—Ç–∏"]) for c in cars}
    old_cars = [c["–º–æ–¥–µ–ª"] for c in cars if year - c["–≥–æ–¥–∏–Ω–∞"] > 5]
    return repairs, old_cars

cars = [
  {"–º–æ–¥–µ–ª":"VW","–≥–æ–¥–∏–Ω–∞":2015,"—Ä–µ–º–æ–Ω—Ç–∏":["–º–∞—Å–ª–æ","–≥—É–º–∏"]},
  {"–º–æ–¥–µ–ª":"BMW","–≥–æ–¥–∏–Ω–∞":2022,"—Ä–µ–º–æ–Ω—Ç–∏":[]}
]
print(service_report(cars))
# –û—á–∞–∫–≤–∞–Ω –∏–∑—Ö–æ–¥: ({'VW':2,'BMW':0}, ['VW'])


# ---------------------------------------------------------------
## üéÆ –ó–ê–î–ê–ß–ê 10: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–∞ –≤–∏–¥–µ–æ–∏–≥—Ä–∞
# ---------------------------------------------------------------
# –ò—Å—Ç–æ—Ä–∏—è:
# –ò–≥—Ä–∞—á–∏—Ç–µ –ø—Ä–µ–º–∏–Ω–∞–≤–∞—Ç –Ω–∏–≤–∞ –∏ —Ç—Ä—É–ø–∞—Ç —Ç–æ—á–∫–∏. –¢—Ä—è–±–≤–∞ –¥–∞ –Ω–∞–º–µ—Ä–∏—à –Ω–∞–π-–¥–æ–±—Ä–∏—è –ø–æ –∫–æ–µ—Ñ–∏—Ü–∏–µ–Ω—Ç.
def best_ratio(players):
    ratios = {n: round(sum(v)/len(v),2) for n,v in players.items() if v}
    best = max(ratios, key=ratios.get)
    return best, ratios[best]

data = {"–ò–≤–∞–Ω":[10,20,30],"–ú–∞—Ä–∏—è":[40,50,60],"–ü–µ—Ç—ä—Ä":[20,20]}
print(best_ratio(data))
# –û—á–∞–∫–≤–∞–Ω –∏–∑—Ö–æ–¥: ('–ú–∞—Ä–∏—è', 50.0)
