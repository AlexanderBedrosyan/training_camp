# üêç –£—Ä–æ–∫: –î–µ–∫–æ—Ä–∞—Ç–æ—Ä–∏ –≤ Python

## üìå –ö–∞–∫–≤–æ –µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä?
–í Python **–¥–µ–∫–æ—Ä–∞—Ç–æ—Ä** –µ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—è—Ç–æ –ø—Ä–∏–µ–º–∞ **–¥—Ä—É–≥–∞ —Ñ—É–Ω–∫—Ü–∏—è** –∫–∞—Ç–æ –∞—Ä–≥—É–º–µ–Ω—Ç, –¥–æ–±–∞–≤—è —ù –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç –∏ –≤—Ä—ä—â–∞ –Ω–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏—è.

–ú–æ–∂–µ –¥–∞ –º–∏—Å–ª–∏—à –∑–∞ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä –∫–∞—Ç–æ –∑–∞ **"–æ–±–≤–∏–≤–∫–∞"** –æ–∫–æ–ª–æ —Ñ—É–Ω–∫—Ü–∏—è ‚Äî –±–µ–∑ –¥–∞ –ø—Ä–æ–º–µ–Ω—è–º–µ –æ—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏—è —ù –∫–æ–¥.

---

## ‚ú® –ó–∞—â–æ –¥–∞ –∏–∑–ø–æ–ª–∑–≤–∞–º–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∏?
- ‚úÖ –ü–æ–≤—Ç–æ—Ä–Ω–æ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ –Ω–∞ –∫–æ–¥  
- ‚úÖ –†–∞–∑–¥–µ–ª—è–Ω–µ –Ω–∞ –ª–æ–≥–∏–∫–∞—Ç–∞ –æ—Ç –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏/–ª–æ–≥–æ–≤–µ  
- ‚úÖ –ü–æ-—á–∏—Å—Ç –∏ –ø–æ–¥–¥—ä—Ä–∂–∞–Ω –∫–æ–¥  

---

## üèóÔ∏è –ü—Ä–∏–º–µ—Ä: –î–µ–∫–æ—Ä–∞—Ç–æ—Ä –∑–∞ –ª–æ–≥–≤–∞–Ω–µ
```python
def logger(func):
    def wrapper(*args, **kwargs):
        print(f"–í–∏–∫–∞–Ω–µ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è: {func.__name__}")
        result = func(*args, **kwargs)
        print(f"–†–µ–∑—É–ª—Ç–∞—Ç: {result}")
        return result
    return wrapper

@logger
def add(a, b):
    return a + b

add(3, 5)
```
**–ö–∞–∫–≤–æ —Å—Ç–∞–≤–∞ —Ç—É–∫?**
1. `@logger` –∫–∞–∑–≤–∞: "–û–±–≤–∏–π —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞ `add` —Å `logger`"
2. –í—Å–µ–∫–∏ –ø—ä—Ç, –∫–æ–≥–∞—Ç–æ –∏–∑–≤–∏–∫–∞–º–µ `add`, —â–µ –∏–º–∞–º–µ –ª–æ–≥–æ–≤–µ –ø—Ä–µ–¥–∏ –∏ —Å–ª–µ–¥ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ—Ç–æ.

---

## ‚öôÔ∏è –ö–∞–∫ —Ä–∞–±–æ—Ç—è—Ç –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∏—Ç–µ —Å—Ç—ä–ø–∫–∞ –ø–æ —Å—Ç—ä–ø–∫–∞
1. –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ä—Ç –µ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—è—Ç–æ –≤—Ä—ä—â–∞ –Ω–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏—è (wrapper).
2. `@decorator_name` –µ —Å—ä–∫—Ä–∞—Ç–µ–Ω –∑–∞–ø–∏—Å –Ω–∞:
```python
add = logger(add)
```
3. `*args` –∏ `**kwargs` –≥–∞—Ä–∞–Ω—Ç–∏—Ä–∞—Ç, —á–µ wrapper –º–æ–∂–µ –¥–∞ –ø—Ä–∏–µ–º–∞ –≤—Å—è–∫–∞–∫–≤–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∏.

---

## üè∑Ô∏è –î–µ–∫–æ—Ä–∞—Ç–æ—Ä–∏ —Å –∞—Ä–≥—É–º–µ–Ω—Ç–∏
–ê–∫–æ –∏—Å–∫–∞–º–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ä—Ç –¥–∞ –ø—Ä–∏–µ–º–∞ **—Å–æ–±—Å—Ç–≤–µ–Ω–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏**:
```python
def repeat(n):
    def decorator(func):
        def wrapper(*args, **kwargs):
            for _ in range(n):
                func(*args, **kwargs)
        return wrapper
    return decorator

@repeat(3)
def say_hello():
    print("Hello!")

say_hello()
```
–¢—É–∫ `repeat(3)` –≤—Ä—ä—â–∞ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä, –∫–æ–π—Ç–æ –∏–∑–ø—ä–ª–Ω—è–≤–∞ —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞ 3 –ø—ä—Ç–∏.

---

## üîç –ó–∞–ø–∞–∑–≤–∞–Ω–µ –Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è—Ç–∞ –∑–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª–Ω–∞—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è
–ó–∞ –¥–∞ –Ω–µ —Å–µ –≥—É–±–∏ –∏–º–µ—Ç–æ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è—Ç–∞:
```python
from functools import wraps

def logger(func):
    @wraps(func)
    def wrapper(*args, **kwargs):
        print(f"Calling {func.__name__}")
        return func(*args, **kwargs)
    return wrapper
```
`@wraps(func)` –ø–∞–∑–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω–∏—Ç–µ (–∏–º–µ, docstring –∏ —Ç.–Ω.).

---

# üß† –ó–∞–¥–∞—á–∏ –∑–∞ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ

---

## üóÇÔ∏è –ó–∞–¥–∞—á–∞ 1: `execution_time.py`
**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ù–∞–ø–∏—à–∏ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä `measure_time`, –∫–æ–π—Ç–æ –∏–∑–º–µ—Ä–≤–∞ –∏ –æ—Ç–ø–µ—á–∞—Ç–≤–∞ –∫–æ–ª–∫–æ –≤—Ä–µ–º–µ –µ –æ—Ç–Ω–µ–ª–æ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ—Ç–æ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞.

**–ü—Ä–∏–º–µ—Ä:**
```python
@measure_time
def slow_function():
    import time
    time.sleep(2)
    return "Done"

slow_function()
# –ò–∑—Ö–æ–¥:
# Executed slow_function in 2.00 seconds
```

---

## üóÇÔ∏è –ó–∞–¥–∞—á–∞ 2: `authorize.py`
**–û–ø–∏—Å–∞–Ω–∏–µ:**
–°—ä–∑–¥–∞–π –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä `requires_login`, –∫–æ–π—Ç–æ –ø—Ä–∏–µ–º–∞ –ø–∞—Ä–∞–º–µ—Ç—ä—Ä `user_logged_in` (–±—É–ª–µ–≤).  
–ê–∫–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ç –Ω–µ –µ –ª–æ–≥–Ω–∞—Ç, —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞ –¥–∞ –Ω–µ —Å–µ –∏–∑–ø—ä–ª–Ω—è–≤–∞.

**–ü—Ä–∏–º–µ—Ä:**
```python
@requires_login(user_logged_in=True)
def view_profile():
    print("Profile page")

view_profile()
```

---

## üóÇÔ∏è –ó–∞–¥–∞—á–∞ 3: `cache.py`
**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ù–∞–ø–∏—à–∏ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä `cache_results`, –∫–æ–π—Ç–æ –∫–µ—à–∏—Ä–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ –æ—Ç —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞ (–ø–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∏), —Ç–∞–∫–∞ —á–µ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏–∑–≤–∏–∫–≤–∞–Ω–µ —Å—ä—Å —Å—ä—â–∏—Ç–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∏ –¥–∞ –Ω–µ –∏–∑—á–∏—Å–ª—è–≤–∞ –æ—Ç–Ω–æ–≤–æ.

**–ü—Ä–∏–º–µ—Ä:**
```python
@cache_results
def fib(n):
    if n < 2:
        return n
    return fib(n-1) + fib(n-2)
```

---

## üóÇÔ∏è –ó–∞–¥–∞—á–∞ 4: `validate_args.py`
**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ù–∞–ø–∏—à–∏ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä `validate_positive`, –∫–æ–π—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–≤–∞ –¥–∞–ª–∏ –≤—Å–∏—á–∫–∏ —á–∏—Å–ª–æ–≤–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∏ —Å–∞ –ø–æ–ª–æ–∂–∏—Ç–µ–ª–Ω–∏.  
–ê–∫–æ –Ω—è–∫–æ–π –µ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª–µ–Ω ‚Äî –≤–¥–∏–≥–Ω–∏ `ValueError`.

**–ü—Ä–∏–º–µ—Ä:**
```python
@validate_positive
def multiply(a, b):
    return a * b

multiply(3, 4)   # –û–ö
multiply(-2, 5)  # –ì—Ä–µ—à–∫–∞
```

---

## üóÇÔ∏è –ó–∞–¥–∞—á–∞ 5: `retry.py`
**–û–ø–∏—Å–∞–Ω–∏–µ:**
–°—ä–∑–¥–∞–π –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä `retry(times)`, –∫–æ–π—Ç–æ –ø—Ä–∏ –≥—Ä–µ—à–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–ø–∏—Ç–≤–∞ –¥–∞ –∏–∑–ø—ä–ª–Ω–∏ —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞ –æ—â–µ `times` –ø—ä—Ç–∏.

**–ü—Ä–∏–º–µ—Ä:**
```python
@retry(3)
def unstable():
    import random
    if random.random() < 0.7:
        raise Exception("Random fail!")
    print("Success!")

unstable()
```

---

üìù **–°—ä–≤–µ—Ç–∏:**
- –ü–æ–ª–∑–≤–∞–π `functools.wraps` –∑–∞ –¥–∞ –ø–∞–∑–∏—à –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª–Ω–∞—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è  
- –ü–æ–ª–∑–≤–∞–π `*args, **kwargs` –∑–∞ –≥—ä–≤–∫–∞–≤–æ—Å—Ç  
- –ú–æ–∂–µ—à –¥–∞ –∫–æ–º–±–∏–Ω–∏—Ä–∞—à –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∏, –∫–∞—Ç–æ –≥–∏ –ø–æ–¥—Ä–µ–¥–∏—à –µ–¥–∏–Ω –Ω–∞–¥ –¥—Ä—É–≥
